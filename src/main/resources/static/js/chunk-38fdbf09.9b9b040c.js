(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38fdbf09"],{"62f9":function(t,e,a){},7582:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper",staticStyle:{height:"3rem"}},[a("span",{staticClass:"table-title",staticStyle:{float:"left"}},[t._v(" 通路检测列表 ")]),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"right"}},[a("a-button",{staticStyle:{"margin-left":"0.5rem"},attrs:{icon:"close"},on:{click:function(e){return t.handleBatchDelete()}}},[t._v("删除")]),a("a-button",{staticStyle:{"margin-left":"0.5rem"},attrs:{icon:"add"},on:{click:function(e){return t.handleAdd()}}},[t._v("添加")])],1)]),a("s-table",{ref:"table",attrs:{bordered:"true",size:"default",columns:t.columns,data:t.loadData,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange,getCheckboxProps:t.onCheckboxProps}},scopedSlots:t._u([{key:"status",fn:function(e,n){return["0"==n.status?a("span",[a("a",{staticStyle:{color:"green"}},[t._v("启用")])]):t._e(),"1"==n.status?a("span",[a("a",{staticStyle:{color:"red"}},[t._v("禁用")])]):t._e()]}},{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.handleEdit(n)}}},[t._v("修改")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.handleDelete(n)}}},[t._v("删除")])],1)}}])}),a("netway-modal",{ref:"modal",on:{ok:t.handleSaveOk,close:t.handleSaveClose}})],1)},s=[],o=(a("d81d"),a("a15b"),a("b0c0"),a("2af9")),i=a("b775"),r={netwayList:"/netway/list",netwayAdd:"/netway/add",netwayEdit:"/netway/modify",netwayDelete:"/netway/remove"};function l(t){return Object(i["b"])({url:r.netwayList,method:"get",params:t})}function c(t,e){return Object(i["b"])({url:"add"==e?r.netwayAdd:r.netwayEdit,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(t){return Object(i["b"])({url:r.netwayDelete,method:"get",params:t})}var u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:600,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{staticClass:"ant-custom-edit-form",attrs:{form:t.form,layout:"inline"}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"通路名称",labelCol:{span:6},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{}],expression:"['name', {}]"}]})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"通路权重",labelCol:{span:6},wrapperCol:{span:18}}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight",{}],expression:"['weight', {}]"}],staticStyle:{width:"100%"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"检测地址",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{}],expression:"['url', {}]"}]})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"有效响应码",labelCol:{span:6},wrapperCol:{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["passCode",{}],expression:"['passCode', {}]"}]})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"顺序号",labelCol:{span:6},wrapperCol:{span:18}}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{}],expression:"['sort', {}]"}],staticStyle:{width:"100%"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"状态",labelCol:{span:6},wrapperCol:{span:18}}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{}],expression:"['status', {}]"}]},[a("a-radio",{attrs:{value:"0"}},[t._v("正常")]),a("a-radio",{attrs:{value:"1"}},[t._v("停用")])],1)],1)],1)],1)],1)],1)],1)},f=[],m=a("5530"),h=(a("d3b7"),{name:"NetwayModal",data:function(){return{labelCol:{span:8},wrapperCol:{span:16},visible:!1,title:"",confirmLoading:!1,isEdit:!1}},beforeCreate:function(){this.form=this.$form.createForm(this)},created:function(){},methods:{add:function(){this.edit({id:"",name:"",url:"",weight:"30",passCode:"200",status:"0"}),this.title="添加检测通路",this.action="add",this.isEdit=!1},edit:function(t){var e=this;this.title="修改检测通路",this.action="edit",this.visible=!0,this.isEdit=!0,this.$nextTick((function(){e.form.setFieldsValue(Object(m["a"])({},t))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var t=this;this.form.validateFields((function(e,a){e||(t.confirmLoading=!0,new Promise((function(t){setTimeout((function(){return t()}),2e3)})).then((function(){t.$emit("ok")})).catch((function(){})).finally((function(){t.confirmLoading=!1,t.close()})))}))},handleCancel:function(){this.close()}}}),p=h,w=(a("a2eb"),a("2877")),b=Object(w["a"])(p,u,f,!1,null,null,null),v=b.exports,y={name:"NetwayList",components:{STable:o["b"],NetwayModal:v},data:function(){var t=this;return{visible:!1,form:null,mdl:{},advanced:!1,queryParam:{},columns:[{title:"序号",dataIndex:"no"},{title:"通路名称",dataIndex:"name"},{title:"检测地址",dataIndex:"url"},{title:"通路权重",dataIndex:"weight"},{title:"有效响应码",dataIndex:"passCode"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){var a=Object.assign({},e,t.queryParam);return l(a).then((function(t){return t.data.list.map((function(t,e){t.no=e+1})),{pageSize:t.data.pageSize,pageNo:t.data.pageNo,totalCount:t.data.totalCount,totalPage:t.data.totalCount/t.data.pageSize+1,data:t.data.list}}))},selectedRowKeys:[],selectedRows:[]}},created:function(){},methods:{handleAdd:function(){this.editItem=null,this.$refs.modal.add()},handleEdit:function(t){this.editItem=t,this.$refs.modal.edit(t)},handleSaveOk:function(){var t=this,e=this.$refs.modal.form.getFieldsValue();this.editItem&&(e.id=this.editItem.id),c(e,this.$refs.modal.action).then((function(e){t.$message.success("保存成功"),t.$refs.table.refresh(!0)}))},handleSaveClose:function(){},handleBatchDelete:function(){var t=[];this.selectedRows.map((function(e){t.push(e.id)})),this.callDeleteNetway(t.join(","),"您将删除选择的"+t.length+"个检测配置，请确认是否继续 ?")},handleDelete:function(t){this.callDeleteNetway(t.id,"您将删除检测配置【"+t.name+"】，请确认是否继续 ?")},callDeleteNetway:function(t,e){var a=this;this.$confirm({title:"提示",content:e,onOk:function(){return d({netwayids:t}).then((function(t){"SUCCESS"==t.code?(a.$message.success("删除成功"),a.$refs.table.refresh(!0)):a.$message.error(t.message)}))}})},onChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},onCheckboxProps:function(t){return{props:{name:t.id}}}}},C=y,g=(a("f812"),Object(w["a"])(C,n,s,!1,null,null,null));e["default"]=g.exports},a2eb:function(t,e,a){"use strict";a("62f9")},b980:function(t,e,a){},f812:function(t,e,a){"use strict";a("b980")}}]);