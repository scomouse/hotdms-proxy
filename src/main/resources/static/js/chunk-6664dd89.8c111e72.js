(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6664dd89"],{2894:function(e,t,a){},"339b":function(e,t,a){"use strict";a("2894")},4686:function(e,t,a){"use strict";a("9d27")},"9d27":function(e,t,a){},bfa6:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper",staticStyle:{height:"3rem"}},[a("span",{staticClass:"table-title",staticStyle:{float:"left"}},[e._v(" 代理列表 ")]),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"right"}},[a("a-button",{staticStyle:{"margin-left":"0.5rem"},attrs:{icon:"refresh"},on:{click:function(t){return e.handleRefresh()}}},[e._v("刷新")]),a("a-button",{staticStyle:{"margin-left":"0.5rem"},attrs:{icon:"refresh"},on:{click:function(t){return e.handleFetch()}}},[e._v("提取测试")])],1)]),a("div",{staticClass:"table-page-filter-wrapper"},[a("span",{staticClass:"filter-title"},[e._v("筛选")]),a("span",{staticClass:"filter-item"},[a("a",{class:e.queryParam.type?"":"selected",on:{click:function(t){return e.handleFilterType("")}}},[e._v("全部")])]),a("span",{staticClass:"filter-item"},[a("a",{class:e.queryParam.type?"":"selected",on:{click:function(t){return e.handleFilterType("SOCK")}}},[e._v("SOCK")])]),a("span",{staticClass:"filter-item"},[a("a",{class:e.queryParam.type?"":"selected",on:{click:function(t){return e.handleFilterType("HTTP")}}},[e._v("HTTP")])]),a("span",{staticClass:"filter-item",staticStyle:{"margin-left":"auto"}},[a("a",{on:{click:e.toggleAdvance}},[e._v("展开高级查询 "),a("a-icon",{attrs:{type:e.advanced?"down":"up"}})],1)])]),e.advanced?a("div",{staticClass:"table-page-search-wrapper inline-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:16}},[a("a-form-item",{attrs:{label:"代理IP"}},[a("a-input",{attrs:{placeholder:"请输入完整代理IP"},model:{value:e.queryParam.ip,callback:function(t){e.$set(e.queryParam,"ip",t)},expression:"queryParam.ip"}})],1)],1),a("a-col",{attrs:{md:8,sm:16}},[a("a-form-item",{attrs:{label:"所属位置"}},[a("a-input",{attrs:{placeholder:"请输入代理位置"},model:{value:e.queryParam.address,callback:function(t){e.$set(e.queryParam,"address",t)},expression:"queryParam.address"}})],1)],1),a("a-col",{attrs:{md:8,sm:16}},[a("a-form-item",{attrs:{label:"代理类型"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.type,callback:function(t){e.$set(e.queryParam,"type",t)},expression:"queryParam.type"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:"SOCK"}},[e._v("SOCK")]),a("a-select-option",{attrs:{value:"HTTP"}},[e._v("HTTP")])],1)],1)],1)],1),a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:16}},[a("a-form-item",{attrs:{label:"速度大于"}},[a("a-input",{attrs:{placeholder:"请输入代理速度"},model:{value:e.queryParam.speed,callback:function(t){e.$set(e.queryParam,"speed",t)},expression:"queryParam.speed"}})],1)],1),a("a-col",{attrs:{md:8,sm:16}},[a("a-form-item",{attrs:{label:"开始时间"}},[a("a-date-picker",{attrs:{format:"YYYY-MM-DD HH:mm:ss",showTime:!0,placeholder:"请选择开始检测时间"},model:{value:e.queryParam.startCheckTime,callback:function(t){e.$set(e.queryParam,"startCheckTime",t)},expression:"queryParam.startCheckTime"}})],1)],1),a("a-col",{attrs:{md:8,sm:16}},[a("a-form-item",{attrs:{label:"结束时间"}},[a("a-date-picker",{attrs:{format:"YYYY-MM-DD HH:mm:ss",showTime:!0,placeholder:"请选择开始检测时间"},model:{value:e.queryParam.endCheckTime,callback:function(t){e.$set(e.queryParam,"endCheckTime",t)},expression:"queryParam.endCheckTime"}})],1)],1)],1),a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:16,sm:32}}),a("a-col",{attrs:{md:8,sm:16}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleAdvanceSearch}},[e._v("搜索")]),a("a-button",{staticStyle:{"margin-left":"0.5rem"},on:{click:e.handleReset}},[e._v("重置")])],1)])],1)],1)],1):e._e(),a("s-table",{ref:"table",attrs:{size:"default",bordered:"true",columns:e.columns,data:e.loadData,pageSize:e.pageSize,rowSelection:{columnWidth:45,selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,getCheckboxProps:e.onCheckboxProps}},scopedSlots:e._u([{key:"status",fn:function(t,s){return["0"==s.status?a("span",[a("a",{staticStyle:{color:"green"}},[e._v("正常")])]):e._e(),"1"==s.status?a("span",[a("a",{staticStyle:{color:"red"}},[e._v("屏蔽")])]):e._e()]}},{key:"action",fn:function(t,s){return a("span",{},["0"==s.status?a("a",{on:{click:function(t){return e.handleShield(s,"1")}}},[e._v("屏蔽")]):e._e(),"1"==s.status?a("a",{on:{click:function(t){return e.handleShield(s,"0")}}},[e._v("恢复")]):e._e(),a("a-divider",{attrs:{type:"vertical"}}),"0"==s.status?a("a",{on:{click:function(t){return e.handleTest(s)}}},[e._v("测试")]):e._e()],1)}}])}),a("test-modal",{ref:"modal",on:{close:e.handleSaveClose}})],1)},r=[],n=(a("d81d"),a("b775")),o={proxyList:"/proxy/list",proxyTest:"/proxy/test",proxyStatus:"/proxy/status",proxyFetch:"/proxy/fetch/random"};function i(e){return Object(n["b"])({url:o.proxyList,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(e){return Object(n["b"])({url:o.proxyTest,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(e){return Object(n["b"])({url:o.proxyStatus,method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(e){return Object(n["b"])({url:o.proxyFetch,method:"get",params:e})}var u=a("2af9"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:640,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("div",{style:{textAlign:"right"}},[a("a-button",{key:"close",on:{click:e.handleCancel}},[e._v("关闭")]),a("a-button",{key:"ok",attrs:{type:"primary"},on:{click:e.handleTest}},[e._v("测试")])],1)]),a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{staticClass:"ant-custom-edit-form",attrs:{form:e.form,layout:"inline"}},[a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"测试代理",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{}],expression:"['name', {}]"}]})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"测试地址",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{}],expression:"['url', {}]"}]})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"测试结果",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["response",{}],expression:"['response', {}]"}],attrs:{rows:"6"}})],1)],1)],1)],1)],1)],2)},m=[],h={name:"TestModal",data:function(){return{labelCol:{span:8},wrapperCol:{span:16},visible:!1,title:"",confirmLoading:!1,proxyId:null}},beforeCreate:function(){this.form=this.$form.createForm(this)},created:function(){},methods:{test:function(e){var t=this;this.title="代理测试",this.visible=!0,this.proxyId=e.id,this.$nextTick((function(){t.form.setFieldsValue({name:e.ip+":"+e.port,url:"",response:""})}))},close:function(){this.$emit("close"),this.visible=!1},handleTest:function(){var e=this,t=this.form.getFieldValue("url");t?l({id:this.proxyId,url:t}).then((function(t){if("SUCCESS"==t.code){var a=t.data.code,s="测试响应码："+a+"\n";s+=-1==a?"发生测试异常："+t.data.message+"\n":302==a?"发生请求跳转："+t.data.redirect+"\n":t.data.content||"",e.form.setFieldsValue({response:s})}})):this.$message.error("请输入测试地址")},handleCancel:function(){this.close()}}},f=h,y=(a("339b"),a("2877")),v=Object(y["a"])(f,p,m,!1,null,null,null),b=v.exports,g={name:"ProxyList",components:{STable:u["b"],TestModal:b},data:function(){var e=this;return{visible:!1,form:null,mdl:{},advanced:!1,pageSize:15,queryParam:{ip:"",address:"",type:"",startCheckTime:"",endCheckTime:"",speed:""},columns:[{title:"序号",width:45,dataIndex:"no"},{title:"代理IP",width:120,dataIndex:"ip"},{title:"端口号",width:90,dataIndex:"port"},{title:"所属位置",width:150,dataIndex:"address"},{title:"速度(毫秒)",width:90,dataIndex:"speed"},{title:"通路(个)",width:90,dataIndex:"ratio"},{title:"最后检测时间",width:150,dataIndex:"checkTime"},{title:"数据来源",width:90,dataIndex:"source"},{title:"状态",width:90,dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",width:"80px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(t){var a=Object.assign({},t,e.advanced?e.queryParam:{type:e.queryParam.type});return i(a).then((function(t){e.tableWithDataRow=t.data.list.length>0;var a=(t.data.pageNo-1)*t.data.pageSize;return t.data.list.map((function(e,t){e.no=a+t+1})),{pageSize:t.data.pageSize,pageNo:t.data.pageNo,totalCount:t.data.totalCount,totalPage:t.data.totalCount/t.data.pageSize+1,data:t.data.list}}))},selectedRowKeys:[],selectedRows:[],productTypes:[],productFactorys:[],importFields:null}},created:function(){},methods:{handleShield:function(e,t){var a=this;c({id:e.id,status:t}).then((function(e){"SUCCESS"==e.code?(a.$message.success("操作成功"),a.$refs.table.refresh(!0)):a.$message.error(e.message)}))},handleFetch:function(){var e=this;d().then((function(t){0==t.code?e.$message.success("随机提取到代理："+t.data[0].ip+":"+t.data[0].port):e.$message.error(t.msg)}))},handleTest:function(e){this.$refs.modal.test(e)},handleRefresh:function(){this.selectedRowKeys=[],this.selectedRows=[],this.$refs.table.refresh(!0)},handleFilterType:function(e){this.queryParam.type=e,this.handleRefresh()},toggleAdvance:function(){this.advanced=!this.advanced,this.advanced&&(this.queryParam.type=null)},handleAdvanceSearch:function(){this.handleRefresh()},handleReset:function(){this.queryParam={}},onChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},onCheckboxProps:function(e){return{props:{name:e.id}}}}},C=g,w=(a("4686"),Object(y["a"])(C,s,r,!1,null,null,null));t["default"]=w.exports}}]);